{
    "id": "/elasticsearch/calls",
    "apps": [{
        "id": "/elasticsearch/calls/kibana",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/kibana/kibana-oss:6.2.2",
            "network": "HOST",
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-kibana:/usr/share/kibana/data"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "ELASTICSEARCH_URL": "http://master.calls-elasticsearch.service.consul:9200",
            "ELASTICSEARCH_REQUESTTIMEOUT": "600000"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-kibana",
            "tags": "external,http,protected"
        },
        "ports": [5601],
        "requirePorts" : true,
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/master-1",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "HOST",
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-master-1:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "9200",
            "transport.tcp.port": "9300",
            "transport.publish_port": "9300",
            "node.name": "calls-master-1",
            "node.master": "true",
            "node.data": "false",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "master"
        },
        "ports": [9200, 9300],
        "requirePorts" : true,
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/master-2",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "HOST",
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-master-2:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "9200",
            "transport.tcp.port": "9300",
            "transport.publish_port": "9300",
            "node.name": "calls-master-2",
            "node.master": "true",
            "node.data": "false",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "master"
        },
        "ports": [9200, 9300],
        "requirePorts" : true,
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/master-3",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "HOST",
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-master-3:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "9200",
            "transport.tcp.port": "9300",
            "transport.publish_port": "9300",
            "node.name": "calls-master-3",
            "node.master": "true",
            "node.data": "false",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "master"
        },
        "ports": [9200, 9300],
        "requirePorts" : true,
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/ingest-1",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "HOST",
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-ingest-1:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "9200",
            "transport.tcp.port": "9300",
            "transport.publish_port": "9300",
            "node.name": "calls-ingest-1",
            "node.master": "false",
            "node.data": "false",
            "node.ingest": "true",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "ingest"
        },
        "ports": [9200, 9300],
        "requirePorts" : true,
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/data-01",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "BRIDGE",
            "portMappings": [
                {"containerPort": 9200, "hostPort": 0, "protocol": "tcp"},
                {"containerPort": 9300, "hostPort": 0, "protocol": "tcp"}
            ],
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-data-01:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "${PORT0}",
            "transport.tcp.port": "9300",
            "transport.publish_port": "${PORT1}",
            "node.name": "calls-data-01",
            "node.master": "false",
            "node.data": "true",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "data"
        },
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/data-02",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "BRIDGE",
            "portMappings": [
                {"containerPort": 9200, "hostPort": 0, "protocol": "tcp"},
                {"containerPort": 9300, "hostPort": 0, "protocol": "tcp"}
            ],
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-data-02:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "${PORT0}",
            "transport.tcp.port": "9300",
            "transport.publish_port": "${PORT1}",
            "node.name": "calls-data-02",
            "node.master": "false",
            "node.data": "true",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "data"
        },
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }, {
        "id": "/elasticsearch/calls/data-03",
        "instances": 1,
        "cpus": 1,
        "mem": 2048,
        "container": {
          "type": "DOCKER",
          "docker": {
            "image": "docker.elastic.co/elasticsearch/elasticsearch-oss:6.2.2",
            "network": "BRIDGE",
            "portMappings": [
                {"containerPort": 9200, "hostPort": 0, "protocol": "tcp"},
                {"containerPort": 9300, "hostPort": 0, "protocol": "tcp"}
            ],
            "parameters": [{
                "key": "volume-driver",
                "value": "rexray"
            }, {
                "key": "volume",
                "value": "es-calls-data-03:/usr/share/elasticsearch/data"
            }, {
                "key": "ulimit",
                "value": "memlock=-1:-1"
            }]
          }
        },
        "env": {
            "ES_JAVA_OPTS": "-Xms1g -Xmx1g",
            "TAKE_FILE_OWNERSHIP": "1",
            "bootstrap.memory_lock": "true",
            "cluster.name": "calls-es",
            "network.publish_host": "${HOST}",
            "http.port": "9200",
            "http.publish_port": "${PORT0}",
            "transport.tcp.port": "9300",
            "transport.publish_port": "${PORT1}",
            "node.name": "calls-data-03",
            "node.master": "false",
            "node.data": "true",
            "node.ingest": "false",
            "search.remote.connect": "false",
            "reindex.remote.whitelist": "search-calls-5q2iul5ve2ef4cwugq53ckegji.us-east-1.es.amazonaws.com:443",
            "discovery.zen.ping.unicast.hosts": "master.calls-elasticsearch.service.consul",
            "discovery.zen.minimum_master_nodes": "2"
        },
        "labels":{
            "MARATHON_SINGLE_INSTANCE_APP": "true",
            "overrideTaskName": "calls-elasticsearch",
            "tags": "data"
        },
        "healthChecks": [{
            "protocol": "MESOS_HTTP",
            "gracePeriodSeconds": 60,
            "intervalSeconds": 5,
            "portIndex": 0,
            "timeoutSeconds": 5,
            "maxConsecutiveFailures": 3
        }],
        "upgradeStrategy":{
            "minimumHealthCapacity": 0,
            "maximumOverCapacity": 0
        }
    }]
}
